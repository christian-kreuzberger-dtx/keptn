<div>
  <div
    fxFlex
    fxLayout="row"
    fxLayoutAlign="flex-start center"
    fxLayoutGap="5px"
    *ngIf="evaluation && evaluation.isFinished()"
  >
    <dt-tag-list aria-label="evaluation-info" *ngIf="showHistory">
      <dt-tag
        *ngFor="let i of !evaluationsLoaded ? [].constructor(this.evaluationHistoryCount) : []"
        [class.border]="true"
        class="m-0 justify-content-center"
      >
        <dt-loading-spinner aria-label="Loading evaluation"></dt-loading-spinner>
      </dt-tag>
      <dt-tag
        *ngFor="let evaluation of evaluation.data?.evaluationHistory"
        class="m-0 mr-1 justify-content-center border"
        [dtOverlay]="overlay"
        [dtOverlayConfig]="overlayConfig"
        [disabled]="overlayDisabled"
        [class.error]="evaluation.isFaulty()"
        [class.warning]="evaluation.isWarning()"
        [class.success]="evaluation.isSuccessful()"
        [textContent]="evaluation.getEvaluationFinishedEvent()?.data?.evaluation?.score | number: '1.0-0'"
      ></dt-tag>
    </dt-tag-list>
    <dt-tag-list aria-label="evaluation-info">
      <dt-tag
        class="m-0 justify-content-center"
        [dtOverlay]="overlay"
        [dtOverlayConfig]="overlayConfig"
        [disabled]="overlayDisabled"
        [class.error]="evaluation.isFaulty()"
        [class.warning]="evaluation.isWarning()"
        [class.success]="evaluation.isSuccessful()"
        [class.border]="fill === false"
        [textContent]="evaluation.getEvaluationFinishedEvent()?.data?.evaluation?.score | number: '1.0-0'"
      ></dt-tag>
    </dt-tag-list>
    <ng-template #overlay>
      <ktb-evaluation-details
        [evaluationData]="evaluation.getEvaluationFinishedEvent()"
        [showChart]="false"
      ></ktb-evaluation-details>
    </ng-template>
  </div>
  <dt-tag-list aria-label="evaluation-info" *ngIf="evaluationResult">
    <dt-tag
      class="m-0 justify-content-center"
      [class.error]="isError"
      [class.warning]="isWarning"
      [class.success]="isSuccess"
      [class.border]="fill === false"
      [textContent]="evaluationResult.score | number: '1.0-0'"
    ></dt-tag>
  </dt-tag-list>
  <dt-tag-list *ngIf="!evaluation?.isFinished() && !evaluationResult">
    <dt-tag class="m-0 justify-content-center" [class.fill]="fill" [textContent]="'-'"></dt-tag>
  </dt-tag-list>
</div>
